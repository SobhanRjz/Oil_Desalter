<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Desalter ‚Äî Optimization Inputs</title>
  <link rel="stylesheet" href="/static/css/input.css" />
</head>
<body>
  <main class="main-container">
    <div class="page-wrapper">
      <header class="page-header">
        <div class="header-content">
          <div class="header-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h.01M16 4h.01M12 2l3 3-3 3-3-3 3-3z"/>
            </svg>
          </div>
          <div class="header-text">
            <h1>Desalter Optimization</h1>
            <p class="header-subtitle">Configure your parameters for optimal crude desalting performance</p>
          </div>
        </div>
        <div class="header-actions">
          <button class="btn-secondary" id="resetBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
            </svg>
            Reset
          </button>
        </div>
      </header>

      <div class="content-grid">
        <!-- QUALITY & STRATEGY -->
        <section class="config-section glass-mount">
          <div class="section-header">
            <div class="section-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div class="section-title">
              <h2>Quality & Strategy</h2>
              <p class="section-description">Set optimization targets and quality parameters</p>
            </div>
          </div>

          <!-- Primary Configuration - Most Important -->
          <div class="primary-config">
            <div class="primary-config-header">
              <div class="priority-badge">Primary Parameters</div>
              <p class="primary-description">Critical quality targets that drive optimization decisions</p>
            </div>

            <div class="primary-grid">
              <div class="primary-card featured-card stagger-item card-pro" data-stagger="1">
                <div class="card-highlight">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <span>Critical</span>
                </div>
                <label class="input-group">
                  <span class="input-label primary-label">Target BS&W (%)</span>
                  <input type="number" id="spec_bsw" min="0.05" max="2.0" step="0.05" value="0.50" class="input-field primary-input" />
                  <span class="input-hint primary-hint">Upper limit for basic sediment & water - Primary quality constraint</span>
                </label>
              </div>

              <div class="primary-card featured-card stagger-item card-pro" data-stagger="2">
                <div class="card-highlight">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h.01M16 4h.01M12 2l3 3-3 3-3-3 3-3z"/>
                  </svg>
                  <span>Critical</span>
                </div>
                <label class="input-group">
                  <span class="input-label primary-label">Spec Salt (PTB)</span>
                  <input type="number" id="spec_salt" min="0.1" max="50.0" step="0.1" value="5.00" class="input-field primary-input" />
                  <span class="input-hint primary-hint">Maximum allowable salt content - Critical quality specification</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Additional Configuration Options -->
          <div class="additional-options">
            <div class="additional-grid">
              <div class="config-card secondary-option stagger-item card-pro" data-stagger="3">
                <label class="input-group">
                  <span class="input-label">Optimization Samples</span>
                  <div class="range-container">
                    <input type="range" id="n_samples" min="500" max="10000" step="500" value="3000" class="range-slider" />
                    <div class="range-value">
                      <span id="samples_out">3,000</span>
                      <span class="range-unit">samples</span>
                    </div>
                  </div>
                  <span class="input-hint">Higher sample count improves accuracy</span>
                </label>
              </div>

              <div class="config-card secondary-option stagger-item card-pro" data-stagger="4">
                <div class="switch-container">
                  <span class="switch-label">Minimize Wash Water</span>
                  <label class="switch">
                    <input type="checkbox" id="use_minimize_wash" />
                    <span class="switch-slider"></span>
                  </label>
                  <span class="switch-hint">Optimize water usage in wash process</span>
                </div>
              </div>
            </div>
          </div>

          <div class="priority-section">
            <h3 class="priority-title">Optimization Priorities</h3>
            <div class="priority-grid">
              <div class="priority-item priority-1 stagger-item card-pro" data-stagger="5">
                <span class="priority-number">1</span>
                <span class="priority-icon">üìà</span>
                <span class="priority-text">Maximize Flow</span>
              </div>
              <div class="priority-item priority-2 stagger-item card-pro" data-stagger="6">
                <span class="priority-number">2</span>
                <span class="priority-icon">üí∞</span>
                <span class="priority-text">Minimize Chemical</span>
              </div>
              <div class="priority-item priority-3 stagger-item card-pro" data-stagger="7">
                <span class="priority-number">3</span>
                <span class="priority-icon">üå°Ô∏è</span>
                <span class="priority-text">Minimize Temperature</span>
              </div>
              <div class="priority-item priority-4 stagger-item card-pro" data-stagger="8">
                <span class="priority-number">4</span>
                <span class="priority-icon">‚ö°</span>
                <span class="priority-text">Minimize Voltage</span>
              </div>
              <div class="priority-item priority-5 stagger-item card-pro" data-stagger="9">
                <span class="priority-number">5</span>
                <span class="priority-icon">üíß</span>
                <span class="priority-text">Minimize Wash</span>
              </div>
            </div>
          </div>
        </section>

        <!-- OPERATING PARAMETERS -->
        <section class="config-section glass-mount">
          <div class="section-header">
            <div class="section-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
            </div>
            <div class="section-title">
              <h2>Searching Range</h2>
              <p class="section-description">Configure process flow, temperature, electrical, and chemical parameters</p>
            </div>
          </div>

          <div class="parameters-grid">
            <!-- Process Flow -->
            <div class="parameter-card stagger-item card-pro" data-stagger="10">
              <div class="parameter-header">
                <div class="parameter-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 14.828V6.172C19 5.525 18.552 5 18 5H6c-.552 0-1 .525-1 1.172v8.656C5 15.475 5.448 16 6 16h12c.552 0 1-.525 1-1.172z"/>
                    <path d="M12 12v4M8 12v4m8-4v4"/>
                  </svg>
                </div>
                <h3>Process Flow</h3>
              </div>
              <div class="parameter-inputs">
                <label class="input-group">
                  <span class="input-label">Min Flow</span>
                  <div class="input-with-unit">
                    <input type="number" id="flow_min" step="1000" value="20000" class="input-field" />
                    <span class="unit">BPD</span>
                  </div>
                </label>
                <label class="input-group">
                  <span class="input-label">Max Flow</span>
                  <div class="input-with-unit">
                    <input type="number" id="flow_max" step="1000" value="60000" class="input-field" />
                    <span class="unit">BPD</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Temperature -->
            <div class="parameter-card stagger-item card-pro" data-stagger="11">
              <div class="parameter-header">
                <div class="parameter-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 14.76V3.5a2.5 2.5 0 00-5 0v11.26a4.5 4.5 0 105 0z"/>
                  </svg>
                </div>
                <h3>Temperature</h3>
              </div>
              <div class="parameter-inputs">
                <label class="input-group">
                  <span class="input-label">Min Temp</span>
                  <div class="input-with-unit">
                    <input type="number" id="T_min" step="1" value="105" class="input-field" />
                    <span class="unit">¬∞C</span>
                  </div>
                </label>
                <label class="input-group">
                  <span class="input-label">Max Temp</span>
                  <div class="input-with-unit">
                    <input type="number" id="T_max" step="1" value="130" class="input-field" />
                    <span class="unit">¬∞C</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Electrical -->
            <div class="parameter-card stagger-item card-pro" data-stagger="12">
              <div class="parameter-header">
                <div class="parameter-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
                  </svg>
                </div>
                <h3>Voltage</h3>
              </div>
              <div class="parameter-inputs">
                <label class="input-group">
                  <span class="input-label">Min Voltage</span>
                  <div class="input-with-unit">
                    <input type="number" id="V_min" step="1" value="22" class="input-field" />
                    <span class="unit">kV</span>
                  </div>
                </label>
                <label class="input-group">
                  <span class="input-label">Max Voltage</span>
                  <div class="input-with-unit">
                    <input type="number" id="V_max" step="1" value="32" class="input-field" />
                    <span class="unit">kV</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Demulsifier -->
            <div class="parameter-card stagger-item card-pro" data-stagger="13">
              <div class="parameter-header">
                <div class="parameter-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h.01M16 4h.01M12 2l3 3-3 3-3-3 3-3z"/>
                  </svg>
                </div>
                <h3>Demulsifier</h3>
              </div>
              <div class="parameter-inputs">
                <label class="input-group">
                  <span class="input-label">Min Concentration</span>
                  <div class="input-with-unit">
                    <input type="number" id="ppm_min" step="1" value="10" class="input-field" />
                    <span class="unit">ppm</span>
                  </div>
                </label>
                <label class="input-group">
                  <span class="input-label">Max Concentration</span>
                  <div class="input-with-unit">
                    <input type="number" id="ppm_max" step="1" value="90" class="input-field" />
                    <span class="unit">ppm</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Wash Water -->
            <div class="parameter-card stagger-item card-pro" data-stagger="14">
              <div class="parameter-header">
                <div class="parameter-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.59-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"/>
                  </svg>
                </div>
                <h3>Wash Water</h3>
              </div>
              <div class="parameter-inputs">
                <label class="input-group">
                  <span class="input-label">Min % of Crude</span>
                  <div class="input-with-unit">
                    <input type="number" id="wash_min" step="0.1" value="0.5" class="input-field" />
                    <span class="unit">%</span>
                  </div>
                </label>
                <label class="input-group">
                  <span class="input-label">Max % of Crude</span>
                  <div class="input-with-unit">
                    <input type="number" id="wash_max" step="0.1" value="4.0" class="input-field" />
                    <span class="unit">%</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Baseline Values -->
            <div class="parameter-card baseline-wide stagger-item card-pro" data-stagger="15">
              <div class="parameter-header">
                <div class="parameter-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                  </svg>
                </div>
                <h3>Baseline Values</h3>
              </div>
              <div class="baseline-content">
                <div class="baseline-grid">
                  <!-- Row 1: Flow and Demulsifier -->
                  <div class="baseline-row">
                    <div class="baseline-item">
                      <label class="input-group">
                        <span class="input-label">Flow (BPD)</span>
                        <div class="input-with-unit">
                          <input type="number" id="baseline_flow" step="1000" value="30000" class="input-field baseline-input" />
                          <span class="unit">BPD</span>
                        </div>
                      </label>
                    </div>
                    <div class="baseline-item">
                      <label class="input-group">
                        <span class="input-label">Demulsifier (ppm)</span>
                        <div class="input-with-unit">
                          <input type="number" id="baseline_demulsifier" step="1" value="70" class="input-field baseline-input" />
                          <span class="unit">ppm</span>
                        </div>
                      </label>
                    </div>
                  </div>

                  <!-- Row 2: Temperature and Voltage -->
                  <div class="baseline-row">
                    <div class="baseline-item">
                      <label class="input-group">
                        <span class="input-label">Temperature (¬∞C)</span>
                        <div class="input-with-unit">
                          <input type="number" id="baseline_temp" step="1" value="120" class="input-field baseline-input" />
                          <span class="unit">¬∞C</span>
                        </div>
                      </label>
                    </div>
                    <div class="baseline-item">
                      <label class="input-group">
                        <span class="input-label">Voltage (kV)</span>
                        <div class="input-with-unit">
                          <input type="number" id="baseline_voltage" step="1" value="28" class="input-field baseline-input" />
                          <span class="unit">kV</span>
                        </div>
                      </label>
                    </div>
                  </div>

                  <!-- Row 3: Wash (centered) -->
                  <div class="baseline-row wash-row">
                    <div class="baseline-item wash-item">
                      <label class="input-group">
                        <span class="input-label">Wash (%)</span>
                        <div class="input-with-unit">
                          <input type="number" id="baseline_wash" step="0.1" value="2.0" class="input-field baseline-input" />
                          <span class="unit">%</span>
                        </div>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Advanced Settings -->
            <div class="parameter-card advanced-card stagger-item card-pro" data-stagger="16">
              <div class="parameter-header">
                <div class="parameter-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                    <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                  </svg>
                </div>
                <h3>Advanced Settings</h3>
              </div>
              <div class="advanced-content">
                <p class="advanced-description">
                  Use defaults for most facilities. Adjust only with specific operational constraints.
                </p>
                <div class="advanced-settings">
                  <div class="setting-item">
                    <span class="setting-label">Design Flow:</span>
                    <span class="setting-value">30,000 BPD</span>
                  </div>
                  <div class="setting-item">
                    <span class="setting-label">Optimization Method:</span>
                    <span class="setting-value">Lexicographic</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

      </div>

      <!-- Action Footer -->
      <footer class="page-footer">
        <div class="footer-content">
          <div class="footer-status">
            <div id="status-indicator" class="status-indicator">
              <div class="status-dot"></div>
              <span id="status-text">Ready to optimize</span>
            </div>
          </div>
          <div class="footer-actions">
            <button class="btn-secondary" id="resetBtn" type="button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Reset All
            </button>
            <button class="btn-primary" id="startBtn" type="button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.586a1 1 0 01.707.293l.707.707A1 1 0 0012.414 11H15m-3-3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Start Optimization
            </button>
          </div>
        </div>

        <!-- Status Messages -->
        <div class="status-messages">
          <div id="error-message" class="message error-message" role="alert" aria-live="polite"></div>
          <div id="success-message" class="message success-message" role="status" aria-live="polite"></div>
        </div>
      </footer>
    </div>
  </main>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="progress-circle">
        <svg>
          <circle class="progress-bg" cx="60" cy="60" r="45"></circle>
          <circle class="progress-fill" cx="60" cy="60" r="45"></circle>
        </svg>
        <div class="progress-center"></div>
      </div>

      <div class="progress-text">
        <h2 class="progress-title">Optimizing Process</h2>
        <p class="progress-subtitle">Analyzing parameters and calculating optimal settings...</p>
      </div>

      <div class="progress-steps">
        <div class="progress-step">
          <div class="step-icon">üìä</div>
          <div class="step-content">
            <h4>Validating Input Data</h4>
            <p>Checking parameter ranges and constraints</p>
          </div>
          <div class="step-progress"></div>
        </div>

        <div class="progress-step">
          <div class="step-icon">‚ö°</div>
          <div class="step-content">
            <h4>Running Optimization Algorithm</h4>
            <p>Applying advanced mathematical models</p>
          </div>
          <div class="step-progress"></div>
        </div>

        <div class="progress-step">
          <div class="step-icon">üéØ</div>
          <div class="step-content">
            <h4>Generating Optimal Solution</h4>
            <p>Finding the best parameter combination</p>
          </div>
          <div class="step-progress"></div>
        </div>

        <div class="progress-step">
          <div class="step-icon">‚úÖ</div>
          <div class="step-content">
            <h4>Finalizing Results</h4>
            <p>Preparing optimization report</p>
          </div>
          <div class="step-progress"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/static/js/input.js" defer></script>
</body>
</html>
